└── jpeg <- { ... } :=
    ├── soi <- map _.1 (...) := 216
    ├── frame <- { ... } :=
    │   ├── initial-segment <- _ |...| _ :=
    │   │   └── app0 <- { ... } :=
    │   │       ├── marker <- map _.1 (...) := 224
    │   │       ├── length <- u16be := 16
    │   │       └── data <- take-bytes (length - 2) { ... } :=
    │   │           ├── identifier <- map _.string { ... } :=
    │   │           │   ├── 0 <- [!= 0] := 74
    │   │           │   ├── 1 <- [!= 0] := 70
    │   │           │   ├── 2 <- [!= 0] := 73
    │   │           │   └── 3 <- [!= 0] := 70
    │   │           └── data <- match identifier { ... } :=
    │   │               ├── version-major <- u8 := 1
    │   │               ├── version-minor <- u8 := 1
    │   │               ├── density-units <- u8 := 1
    │   │               ├── density-x <- u16be := 50
    │   │               ├── density-y <- u16be := 50
    │   │               ├── thumbnail-width <- u8 := 0
    │   │               ├── thumbnail-height <- u8 := 0
    │   │               └── thumbnail-pixels <- repeat-count thumbnail-height (repeat-count thumbnail-width { ... }) := []
    │   ├── segments <- repeat (_ |...| _) :=
    │   │   ├── 0 <- _ |...| _ :=
    │   │   │   └── dqt <- { ... } :=
    │   │   │       ├── marker <- map _.1 (...) := 219
    │   │   │       ├── length <- u16be := 67
    │   │   │       └── data <- take-bytes (length - 2) { ... } :=
    │   │   │           ├── precision-table-id <- u8 := 0
    │   │   │           └── elements <- repeat u8 :=
    │   │   │               ├── 0 <- u8 := 8
    │   │   │               ├── 1 <- u8 := 6
    │   │   │               ├── 2 <- u8 := 6
    │   │   │               ├── 3 <- u8 := 7
    │   │   │               ├── 4 <- u8 := 6
    │   │   │               ├── 5 <- u8 := 5
    │   │   │               ├── 6 <- u8 := 8
    │   │   │               ├── 7 <- u8 := 7
    │   │   │               ├── 8 <- u8 := 7
    │   │   │               ├── 9 <- u8 := 7
    │   │   │               ~
    │   │   │               └── 63 <- u8 := 50
    │   │   └── 1 <- _ |...| _ :=
    │   │       └── dqt <- { ... } :=
    │   │           ├── marker <- map _.1 (...) := 219
    │   │           ├── length <- u16be := 67
    │   │           └── data <- take-bytes (length - 2) { ... } :=
    │   │               ├── precision-table-id <- u8 := 1
    │   │               └── elements <- repeat u8 :=
    │   │                   ├── 0 <- u8 := 9
    │   │                   ├── 1 <- u8 := 9
    │   │                   ├── 2 <- u8 := 9
    │   │                   ├── 3 <- u8 := 12
    │   │                   ├── 4 <- u8 := 11
    │   │                   ├── 5 <- u8 := 12
    │   │                   ├── 6 <- u8 := 24
    │   │                   ├── 7 <- u8 := 13
    │   │                   ├── 8 <- u8 := 13
    │   │                   ├── 9 <- u8 := 24
    │   │                   ~
    │   │                   └── 63 <- u8 := 50
    │   ├── header <- _ |...| _ :=
    │   │   └── sof0 <- { ... } :=
    │   │       ├── marker <- map _.1 (...) := 192
    │   │       ├── length <- u16be := 17
    │   │       └── data <- take-bytes (length - 2) { ... } :=
    │   │           ├── sample-precision <- u8 := 8
    │   │           ├── num-lines <- u16be := 97
    │   │           ├── num-samples-per-line <- u16be := 105
    │   │           ├── num-image-components <- u8 := 3
    │   │           └── image-components <- repeat-count num-image-components { ... } :=
    │   │               ├── 0 <- { ... } :=
    │   │               │   ├── id <- u8 := 1
    │   │               │   ├── sampling-factor <- u8 := 34
    │   │               │   └── quantization-table-id <- u8 := 0
    │   │               ├── 1 <- { ... } :=
    │   │               │   ├── id <- u8 := 2
    │   │               │   ├── sampling-factor <- u8 := 17
    │   │               │   └── quantization-table-id <- u8 := 1
    │   │               └── 2 <- { ... } :=
    │   │                   ├── id <- u8 := 3
    │   │                   ├── sampling-factor <- u8 := 17
    │   │                   └── quantization-table-id <- u8 := 1
    │   ├── scan <- { ... } :=
    │   │   ├── segments <- repeat (_ |...| _) :=
    │   │   │   ├── 0 <- _ |...| _ :=
    │   │   │   │   └── dht <- { ... } :=
    │   │   │   │       ├── marker <- map _.1 (...) := 196
    │   │   │   │       ├── length <- u16be := 27
    │   │   │   │       └── data <- take-bytes (length - 2) { ... } :=
    │   │   │   │           ├── class-table-id <- u8 := 0
    │   │   │   │           ├── num-codes <- repeat-count 16 u8 :=
    │   │   │   │           │   ├── 0 <- u8 := 0
    │   │   │   │           │   ├── 1 <- u8 := 2
    │   │   │   │           │   ├── 2 <- u8 := 2
    │   │   │   │           │   ├── 3 <- u8 := 3
    │   │   │   │           │   ├── 4 <- u8 := 1
    │   │   │   │           │   ├── 5 <- u8 := 0
    │   │   │   │           │   ├── 6 <- u8 := 0
    │   │   │   │           │   ├── 7 <- u8 := 0
    │   │   │   │           │   ├── 8 <- u8 := 0
    │   │   │   │           │   ├── 9 <- u8 := 0
    │   │   │   │           │   ~
    │   │   │   │           │   └── 15 <- u8 := 0
    │   │   │   │           └── values <- repeat u8 :=
    │   │   │   │               ├── 0 <- u8 := 0
    │   │   │   │               ├── 1 <- u8 := 6
    │   │   │   │               ├── 2 <- u8 := 5
    │   │   │   │               ├── 3 <- u8 := 7
    │   │   │   │               ├── 4 <- u8 := 2
    │   │   │   │               ├── 5 <- u8 := 3
    │   │   │   │               ├── 6 <- u8 := 4
    │   │   │   │               └── 7 <- u8 := 1
    │   │   │   ├── 1 <- _ |...| _ :=
    │   │   │   │   └── dht <- { ... } :=
    │   │   │   │       ├── marker <- map _.1 (...) := 196
    │   │   │   │       ├── length <- u16be := 58
    │   │   │   │       └── data <- take-bytes (length - 2) { ... } :=
    │   │   │   │           ├── class-table-id <- u8 := 16
    │   │   │   │           ├── num-codes <- repeat-count 16 u8 :=
    │   │   │   │           │   ├── 0 <- u8 := 0
    │   │   │   │           │   ├── 1 <- u8 := 2
    │   │   │   │           │   ├── 2 <- u8 := 1
    │   │   │   │           │   ├── 3 <- u8 := 3
    │   │   │   │           │   ├── 4 <- u8 := 3
    │   │   │   │           │   ├── 5 <- u8 := 3
    │   │   │   │           │   ├── 6 <- u8 := 2
    │   │   │   │           │   ├── 7 <- u8 := 3
    │   │   │   │           │   ├── 8 <- u8 := 6
    │   │   │   │           │   ├── 9 <- u8 := 2
    │   │   │   │           │   ~
    │   │   │   │           │   └── 15 <- u8 := 0
    │   │   │   │           └── values <- repeat u8 :=
    │   │   │   │               ├── 0 <- u8 := 1
    │   │   │   │               ├── 1 <- u8 := 2
    │   │   │   │               ├── 2 <- u8 := 3
    │   │   │   │               ├── 3 <- u8 := 4
    │   │   │   │               ├── 4 <- u8 := 5
    │   │   │   │               ├── 5 <- u8 := 17
    │   │   │   │               ├── 6 <- u8 := 0
    │   │   │   │               ├── 7 <- u8 := 18
    │   │   │   │               ├── 8 <- u8 := 33
    │   │   │   │               ├── 9 <- u8 := 6
    │   │   │   │               ~
    │   │   │   │               └── 38 <- u8 := 225
    │   │   │   ├── 2 <- _ |...| _ :=
    │   │   │   │   └── dht <- { ... } :=
    │   │   │   │       ├── marker <- map _.1 (...) := 196
    │   │   │   │       ├── length <- u16be := 26
    │   │   │   │       └── data <- take-bytes (length - 2) { ... } :=
    │   │   │   │           ├── class-table-id <- u8 := 1
    │   │   │   │           ├── num-codes <- repeat-count 16 u8 :=
    │   │   │   │           │   ├── 0 <- u8 := 0
    │   │   │   │           │   ├── 1 <- u8 := 2
    │   │   │   │           │   ├── 2 <- u8 := 3
    │   │   │   │           │   ├── 3 <- u8 := 1
    │   │   │   │           │   ├── 4 <- u8 := 1
    │   │   │   │           │   ├── 5 <- u8 := 0
    │   │   │   │           │   ├── 6 <- u8 := 0
    │   │   │   │           │   ├── 7 <- u8 := 0
    │   │   │   │           │   ├── 8 <- u8 := 0
    │   │   │   │           │   ├── 9 <- u8 := 0
    │   │   │   │           │   ~
    │   │   │   │           │   └── 15 <- u8 := 0
    │   │   │   │           └── values <- repeat u8 :=
    │   │   │   │               ├── 0 <- u8 := 0
    │   │   │   │               ├── 1 <- u8 := 4
    │   │   │   │               ├── 2 <- u8 := 1
    │   │   │   │               ├── 3 <- u8 := 3
    │   │   │   │               ├── 4 <- u8 := 5
    │   │   │   │               ├── 5 <- u8 := 2
    │   │   │   │               └── 6 <- u8 := 6
    │   │   │   └── 3 <- _ |...| _ :=
    │   │   │       └── dht <- { ... } :=
    │   │   │           ├── marker <- map _.1 (...) := 196
    │   │   │           ├── length <- u16be := 38
    │   │   │           └── data <- take-bytes (length - 2) { ... } :=
    │   │   │               ├── class-table-id <- u8 := 17
    │   │   │               ├── num-codes <- repeat-count 16 u8 :=
    │   │   │               │   ├── 0 <- u8 := 0
    │   │   │               │   ├── 1 <- u8 := 3
    │   │   │               │   ├── 2 <- u8 := 0
    │   │   │               │   ├── 3 <- u8 := 2
    │   │   │               │   ├── 4 <- u8 := 2
    │   │   │               │   ├── 5 <- u8 := 2
    │   │   │               │   ├── 6 <- u8 := 1
    │   │   │               │   ├── 7 <- u8 := 4
    │   │   │               │   ├── 8 <- u8 := 2
    │   │   │               │   ├── 9 <- u8 := 3
    │   │   │               │   ~
    │   │   │               │   └── 15 <- u8 := 0
    │   │   │               └── values <- repeat u8 :=
    │   │   │                   ├── 0 <- u8 := 0
    │   │   │                   ├── 1 <- u8 := 1
    │   │   │                   ├── 2 <- u8 := 2
    │   │   │                   ├── 3 <- u8 := 3
    │   │   │                   ├── 4 <- u8 := 17
    │   │   │                   ├── 5 <- u8 := 4
    │   │   │                   ├── 6 <- u8 := 33
    │   │   │                   ├── 7 <- u8 := 18
    │   │   │                   ├── 8 <- u8 := 49
    │   │   │                   ├── 9 <- u8 := 34
    │   │   │                   ~
    │   │   │                   └── 18 <- u8 := 145
    │   │   ├── sos <- { ... } :=
    │   │   │   ├── marker <- map _.1 (...) := 218
    │   │   │   ├── length <- u16be := 12
    │   │   │   └── data <- take-bytes (length - 2) { ... } :=
    │   │   │       ├── num-image-components <- u8 := 3
    │   │   │       ├── image-components <- repeat-count num-image-components { ... } :=
    │   │   │       │   ├── 0 <- { ... } :=
    │   │   │       │   │   ├── component-selector <- u8 := 1
    │   │   │       │   │   └── entropy-coding-table-ids <- u8 := 0
    │   │   │       │   ├── 1 <- { ... } :=
    │   │   │       │   │   ├── component-selector <- u8 := 2
    │   │   │       │   │   └── entropy-coding-table-ids <- u8 := 17
    │   │   │       │   └── 2 <- { ... } :=
    │   │   │       │       ├── component-selector <- u8 := 3
    │   │   │       │       └── entropy-coding-table-ids <- u8 := 17
    │   │   │       ├── start-spectral-selection <- u8 := 0
    │   │   │       ├── end-spectral-selection <- u8 := 63
    │   │   │       └── approximation-bit-position <- u8 := 0
    │   │   └── data <- map stream (repeat (map (fun x => match x { ... }) (_ |...| _))) :=
    │   │       ├── 0 := 191
    │   │       ├── 1 := 244
    │   │       ├── 2 := 104
    │   │       ├── 3 := 209
    │   │       ├── 4 := 160
    │   │       ├── 5 := 3
    │   │       ├── 6 := 70
    │   │       ├── 7 := 141
    │   │       ├── 8 := 26
    │   │       ├── 9 := 0
    │   │       ~
    │   │       └── 3636 := 15
    │   ├── dnl <- _ |...| _ := { none := () }
    │   └── scans <- repeat { ... } := []
    └── eoi <- map _.1 (...) := 217
