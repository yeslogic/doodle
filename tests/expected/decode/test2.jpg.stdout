├── data <- _ |...| _ :=
│   └── jpeg <- jpeg.main :=
│       ├── soi <- jpeg.soi :=
│       │   ├── ff <- [= 255] := 255
│       │   └── marker <- [= 216] := 216
│       ├── frame <- jpeg.frame :=
│       │   ├── initial-segment <- _ |...| _ :=
│       │   │   └── app1 <- jpeg.app1 :=
│       │   │       ├── marker <- { ... } :=
│       │   │       │   ├── ff <- [= 255] := 255
│       │   │       │   └── marker <- [= 225] := 225
│       │   │       ├── length <- base.u16be :=
│       │   │       │   ├── bytes <- (...) :=
│       │   │       │   │   ├── 0 <- base.u8 := 21
│       │   │       │   │   └── 1 <- base.u8 := 50
│       │   │       │   └── @value <- compute u16be bytes := 5426
│       │   │       └── data <- slice (length.@value - 2) jpeg.app1-data :=
│       │   │           ├── identifier <- base.asciiz-string :=
│       │   │           │   ├── string <- repeat [!= 0] :=
│       │   │           │   │   ├── 0 <- [!= 0] := 69
│       │   │           │   │   ├── 1 <- [!= 0] := 120
│       │   │           │   │   ├── 2 <- [!= 0] := 105
│       │   │           │   │   └── 3 <- [!= 0] := 102
│       │   │           │   └── null <- [= 0] := 0
│       │   │           └── data <- match identifier.string { ... } :=
│       │   │               ├── padding <- [= 0] := 0
│       │   │               └── exif <- tiff.main :=
│       │   │                   ├── byte-order <- _ |...| _ :=
│       │   │                   │   └── be <- (...) :=
│       │   │                   │       ├── 0 <- [= 77] := 77
│       │   │                   │       └── 1 <- [= 77] := 77
│       │   │                   ├── magic <- match byte-order { ... } :=
│       │   │                   │   ├── bytes <- (...) :=
│       │   │                   │   │   ├── 0 <- base.u8 := 0
│       │   │                   │   │   └── 1 <- base.u8 := 42
│       │   │                   │   └── @value <- compute u16be bytes := 42
│       │   │                   ├── offset <- match byte-order { ... } :=
│       │   │                   │   ├── bytes <- (...) :=
│       │   │                   │   │   ├── 0 <- base.u8 := 0
│       │   │                   │   │   ├── 1 <- base.u8 := 0
│       │   │                   │   │   ├── 2 <- base.u8 := 0
│       │   │                   │   │   └── 3 <- base.u8 := 8
│       │   │                   │   └── @value <- compute u32be bytes := 8
│       │   │                   └── ifd <- with-relative-offset (offset.@value - 8) (match byte-order { ... }) :=
│       │   │                       ├── num-fields <- base.u16be :=
│       │   │                       │   ├── bytes <- (...) :=
│       │   │                       │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   └── 1 <- base.u8 := 7
│       │   │                       │   └── @value <- compute u16be bytes := 7
│       │   │                       ├── fields <- repeat-count (num-fields.@value) { ... } :=
│       │   │                       │   ├── 0 <- { ... } :=
│       │   │                       │   │   ├── tag <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 1
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 18
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 274
│       │   │                       │   │   ├── type <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 3
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 3
│       │   │                       │   │   ├── length <- base.u32be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 3 <- base.u8 := 1
│       │   │                       │   │   │   └── @value <- compute u32be bytes := 1
│       │   │                       │   │   └── offset-or-data <- base.u32be :=
│       │   │                       │   │       ├── bytes <- (...) :=
│       │   │                       │   │       │   ├── 0 <- base.u8 := 0
│       │   │                       │   │       │   ├── 1 <- base.u8 := 1
│       │   │                       │   │       │   ├── 2 <- base.u8 := 0
│       │   │                       │   │       │   └── 3 <- base.u8 := 0
│       │   │                       │   │       └── @value <- compute u32be bytes := 65536
│       │   │                       │   ├── 1 <- { ... } :=
│       │   │                       │   │   ├── tag <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 1
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 26
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 282
│       │   │                       │   │   ├── type <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 5
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 5
│       │   │                       │   │   ├── length <- base.u32be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 3 <- base.u8 := 1
│       │   │                       │   │   │   └── @value <- compute u32be bytes := 1
│       │   │                       │   │   └── offset-or-data <- base.u32be :=
│       │   │                       │   │       ├── bytes <- (...) :=
│       │   │                       │   │       │   ├── 0 <- base.u8 := 0
│       │   │                       │   │       │   ├── 1 <- base.u8 := 0
│       │   │                       │   │       │   ├── 2 <- base.u8 := 0
│       │   │                       │   │       │   └── 3 <- base.u8 := 98
│       │   │                       │   │       └── @value <- compute u32be bytes := 98
│       │   │                       │   ├── 2 <- { ... } :=
│       │   │                       │   │   ├── tag <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 1
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 27
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 283
│       │   │                       │   │   ├── type <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 5
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 5
│       │   │                       │   │   ├── length <- base.u32be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 3 <- base.u8 := 1
│       │   │                       │   │   │   └── @value <- compute u32be bytes := 1
│       │   │                       │   │   └── offset-or-data <- base.u32be :=
│       │   │                       │   │       ├── bytes <- (...) :=
│       │   │                       │   │       │   ├── 0 <- base.u8 := 0
│       │   │                       │   │       │   ├── 1 <- base.u8 := 0
│       │   │                       │   │       │   ├── 2 <- base.u8 := 0
│       │   │                       │   │       │   └── 3 <- base.u8 := 106
│       │   │                       │   │       └── @value <- compute u32be bytes := 106
│       │   │                       │   ├── 3 <- { ... } :=
│       │   │                       │   │   ├── tag <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 1
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 40
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 296
│       │   │                       │   │   ├── type <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 3
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 3
│       │   │                       │   │   ├── length <- base.u32be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 3 <- base.u8 := 1
│       │   │                       │   │   │   └── @value <- compute u32be bytes := 1
│       │   │                       │   │   └── offset-or-data <- base.u32be :=
│       │   │                       │   │       ├── bytes <- (...) :=
│       │   │                       │   │       │   ├── 0 <- base.u8 := 0
│       │   │                       │   │       │   ├── 1 <- base.u8 := 2
│       │   │                       │   │       │   ├── 2 <- base.u8 := 0
│       │   │                       │   │       │   └── 3 <- base.u8 := 0
│       │   │                       │   │       └── @value <- compute u32be bytes := 131072
│       │   │                       │   ├── 4 <- { ... } :=
│       │   │                       │   │   ├── tag <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 1
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 49
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 305
│       │   │                       │   │   ├── type <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 2
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 2
│       │   │                       │   │   ├── length <- base.u32be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 3 <- base.u8 := 30
│       │   │                       │   │   │   └── @value <- compute u32be bytes := 30
│       │   │                       │   │   └── offset-or-data <- base.u32be :=
│       │   │                       │   │       ├── bytes <- (...) :=
│       │   │                       │   │       │   ├── 0 <- base.u8 := 0
│       │   │                       │   │       │   ├── 1 <- base.u8 := 0
│       │   │                       │   │       │   ├── 2 <- base.u8 := 0
│       │   │                       │   │       │   └── 3 <- base.u8 := 114
│       │   │                       │   │       └── @value <- compute u32be bytes := 114
│       │   │                       │   ├── 5 <- { ... } :=
│       │   │                       │   │   ├── tag <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 1
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 50
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 306
│       │   │                       │   │   ├── type <- base.u16be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 1 <- base.u8 := 2
│       │   │                       │   │   │   └── @value <- compute u16be bytes := 2
│       │   │                       │   │   ├── length <- base.u32be :=
│       │   │                       │   │   │   ├── bytes <- (...) :=
│       │   │                       │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   │   │   └── 3 <- base.u8 := 20
│       │   │                       │   │   │   └── @value <- compute u32be bytes := 20
│       │   │                       │   │   └── offset-or-data <- base.u32be :=
│       │   │                       │   │       ├── bytes <- (...) :=
│       │   │                       │   │       │   ├── 0 <- base.u8 := 0
│       │   │                       │   │       │   ├── 1 <- base.u8 := 0
│       │   │                       │   │       │   ├── 2 <- base.u8 := 0
│       │   │                       │   │       │   └── 3 <- base.u8 := 144
│       │   │                       │   │       └── @value <- compute u32be bytes := 144
│       │   │                       │   └── 6 <- { ... } :=
│       │   │                       │       ├── tag <- base.u16be :=
│       │   │                       │       │   ├── bytes <- (...) :=
│       │   │                       │       │   │   ├── 0 <- base.u8 := 135
│       │   │                       │       │   │   └── 1 <- base.u8 := 105
│       │   │                       │       │   └── @value <- compute u16be bytes := 34665
│       │   │                       │       ├── type <- base.u16be :=
│       │   │                       │       │   ├── bytes <- (...) :=
│       │   │                       │       │   │   ├── 0 <- base.u8 := 0
│       │   │                       │       │   │   └── 1 <- base.u8 := 4
│       │   │                       │       │   └── @value <- compute u16be bytes := 4
│       │   │                       │       ├── length <- base.u32be :=
│       │   │                       │       │   ├── bytes <- (...) :=
│       │   │                       │       │   │   ├── 0 <- base.u8 := 0
│       │   │                       │       │   │   ├── 1 <- base.u8 := 0
│       │   │                       │       │   │   ├── 2 <- base.u8 := 0
│       │   │                       │       │   │   └── 3 <- base.u8 := 1
│       │   │                       │       │   └── @value <- compute u32be bytes := 1
│       │   │                       │       └── offset-or-data <- base.u32be :=
│       │   │                       │           ├── bytes <- (...) :=
│       │   │                       │           │   ├── 0 <- base.u8 := 0
│       │   │                       │           │   ├── 1 <- base.u8 := 0
│       │   │                       │           │   ├── 2 <- base.u8 := 0
│       │   │                       │           │   └── 3 <- base.u8 := 164
│       │   │                       │           └── @value <- compute u32be bytes := 164
│       │   │                       ├── next-ifd-offset <- base.u32be :=
│       │   │                       │   ├── bytes <- (...) :=
│       │   │                       │   │   ├── 0 <- base.u8 := 0
│       │   │                       │   │   ├── 1 <- base.u8 := 0
│       │   │                       │   │   ├── 2 <- base.u8 := 0
│       │   │                       │   │   └── 3 <- base.u8 := 208
│       │   │                       │   └── @value <- compute u32be bytes := 208
│       │   │                       └── next-ifd <- repeat base.u8 :=
│       │   │                           ├── 0 <- base.u8 := 0
│       │   │                           ├── 1 <- base.u8 := 45
│       │   │                           ├── 2 <- base.u8 := 198
│       │   │                           ├── 3 <- base.u8 := 192
│       │   │                           ├── 4 <- base.u8 := 0
│       │   │                           ├── 5 <- base.u8 := 0
│       │   │                           ├── 6 <- base.u8 := 39
│       │   │                           ├── 7 <- base.u8 := 16
│       │   │                           ├── 8 <- base.u8 := 0
│       │   │                           ├── 9 <- base.u8 := 45
│       │   │                           ~
│       │   │                           └── 5319 <- base.u8 := 217
│       │   ├── segments <- repeat jpeg.table-or-misc :=
│       │   │   ├── 0 <- jpeg.table-or-misc :=
│       │   │   │   └── app13 <- jpeg.app13 :=
│       │   │   │       ├── marker <- { ... } :=
│       │   │   │       │   ├── ff <- [= 255] := 255
│       │   │   │       │   └── marker <- [= 237] := 237
│       │   │   │       ├── length <- base.u16be :=
│       │   │   │       │   ├── bytes <- (...) :=
│       │   │   │       │   │   ├── 0 <- base.u8 := 41
│       │   │   │       │   │   └── 1 <- base.u8 := 104
│       │   │   │       │   └── @value <- compute u16be bytes := 10600
│       │   │   │       └── data <- slice (length.@value - 2) (repeat base.u8) :=
│       │   │   │           ├── 0 <- base.u8 := 80
│       │   │   │           ├── 1 <- base.u8 := 104
│       │   │   │           ├── 2 <- base.u8 := 111
│       │   │   │           ├── 3 <- base.u8 := 116
│       │   │   │           ├── 4 <- base.u8 := 111
│       │   │   │           ├── 5 <- base.u8 := 115
│       │   │   │           ├── 6 <- base.u8 := 104
│       │   │   │           ├── 7 <- base.u8 := 111
│       │   │   │           ├── 8 <- base.u8 := 112
│       │   │   │           ├── 9 <- base.u8 := 32
│       │   │   │           ~
│       │   │   │           └── 10597 <- base.u8 := 0
│       │   │   ├── 1 <- jpeg.table-or-misc :=
│       │   │   │   └── app1 <- jpeg.app1 :=
│       │   │   │       ├── marker <- { ... } :=
│       │   │   │       │   ├── ff <- [= 255] := 255
│       │   │   │       │   └── marker <- [= 225] := 225
│       │   │   │       ├── length <- base.u16be :=
│       │   │   │       │   ├── bytes <- (...) :=
│       │   │   │       │   │   ├── 0 <- base.u8 := 17
│       │   │   │       │   │   └── 1 <- base.u8 := 77
│       │   │   │       │   └── @value <- compute u16be bytes := 4429
│       │   │   │       └── data <- slice (length.@value - 2) jpeg.app1-data :=
│       │   │   │           ├── identifier <- base.asciiz-string :=
│       │   │   │           │   ├── string <- repeat [!= 0] :=
│       │   │   │           │   │   ├── 0 <- [!= 0] := 104
│       │   │   │           │   │   ├── 1 <- [!= 0] := 116
│       │   │   │           │   │   ├── 2 <- [!= 0] := 116
│       │   │   │           │   │   ├── 3 <- [!= 0] := 112
│       │   │   │           │   │   ├── 4 <- [!= 0] := 58
│       │   │   │           │   │   ├── 5 <- [!= 0] := 47
│       │   │   │           │   │   ├── 6 <- [!= 0] := 47
│       │   │   │           │   │   ├── 7 <- [!= 0] := 110
│       │   │   │           │   │   ├── 8 <- [!= 0] := 115
│       │   │   │           │   │   ├── 9 <- [!= 0] := 46
│       │   │   │           │   │   ~
│       │   │   │           │   │   └── 27 <- [!= 0] := 47
│       │   │   │           │   └── null <- [= 0] := 0
│       │   │   │           └── data <- match identifier.string { ... } :=
│       │   │   │               └── xmp <- repeat base.u8 :=
│       │   │   │                   ├── 0 <- base.u8 := 60
│       │   │   │                   ├── 1 <- base.u8 := 63
│       │   │   │                   ├── 2 <- base.u8 := 120
│       │   │   │                   ├── 3 <- base.u8 := 112
│       │   │   │                   ├── 4 <- base.u8 := 97
│       │   │   │                   ├── 5 <- base.u8 := 99
│       │   │   │                   ├── 6 <- base.u8 := 107
│       │   │   │                   ├── 7 <- base.u8 := 101
│       │   │   │                   ├── 8 <- base.u8 := 116
│       │   │   │                   ├── 9 <- base.u8 := 32
│       │   │   │                   ~
│       │   │   │                   └── 4397 <- base.u8 := 62
│       │   │   ├── 2 <- jpeg.table-or-misc :=
│       │   │   │   └── app2 <- jpeg.app2 :=
│       │   │   │       ├── marker <- { ... } :=
│       │   │   │       │   ├── ff <- [= 255] := 255
│       │   │   │       │   └── marker <- [= 226] := 226
│       │   │   │       ├── length <- base.u16be :=
│       │   │   │       │   ├── bytes <- (...) :=
│       │   │   │       │   │   ├── 0 <- base.u8 := 2
│       │   │   │       │   │   └── 1 <- base.u8 := 64
│       │   │   │       │   └── @value <- compute u16be bytes := 576
│       │   │   │       └── data <- slice (length.@value - 2) (repeat base.u8) :=
│       │   │   │           ├── 0 <- base.u8 := 73
│       │   │   │           ├── 1 <- base.u8 := 67
│       │   │   │           ├── 2 <- base.u8 := 67
│       │   │   │           ├── 3 <- base.u8 := 95
│       │   │   │           ├── 4 <- base.u8 := 80
│       │   │   │           ├── 5 <- base.u8 := 82
│       │   │   │           ├── 6 <- base.u8 := 79
│       │   │   │           ├── 7 <- base.u8 := 70
│       │   │   │           ├── 8 <- base.u8 := 73
│       │   │   │           ├── 9 <- base.u8 := 76
│       │   │   │           ~
│       │   │   │           └── 573 <- base.u8 := 156
│       │   │   ├── 3 <- jpeg.table-or-misc :=
│       │   │   │   └── app14 <- jpeg.app14 :=
│       │   │   │       ├── marker <- { ... } :=
│       │   │   │       │   ├── ff <- [= 255] := 255
│       │   │   │       │   └── marker <- [= 238] := 238
│       │   │   │       ├── length <- base.u16be :=
│       │   │   │       │   ├── bytes <- (...) :=
│       │   │   │       │   │   ├── 0 <- base.u8 := 0
│       │   │   │       │   │   └── 1 <- base.u8 := 14
│       │   │   │       │   └── @value <- compute u16be bytes := 14
│       │   │   │       └── data <- slice (length.@value - 2) (repeat base.u8) :=
│       │   │   │           ├── 0 <- base.u8 := 65
│       │   │   │           ├── 1 <- base.u8 := 100
│       │   │   │           ├── 2 <- base.u8 := 111
│       │   │   │           ├── 3 <- base.u8 := 98
│       │   │   │           ├── 4 <- base.u8 := 101
│       │   │   │           ├── 5 <- base.u8 := 0
│       │   │   │           ├── 6 <- base.u8 := 100
│       │   │   │           ├── 7 <- base.u8 := 64
│       │   │   │           ├── 8 <- base.u8 := 0
│       │   │   │           ├── 9 <- base.u8 := 0
│       │   │   │           ~
│       │   │   │           └── 11 <- base.u8 := 1
│       │   │   └── 4 <- jpeg.table-or-misc :=
│       │   │       └── dqt <- jpeg.dqt :=
│       │   │           ├── marker <- { ... } :=
│       │   │           │   ├── ff <- [= 255] := 255
│       │   │           │   └── marker <- [= 219] := 219
│       │   │           ├── length <- base.u16be :=
│       │   │           │   ├── bytes <- (...) :=
│       │   │           │   │   ├── 0 <- base.u8 := 0
│       │   │           │   │   └── 1 <- base.u8 := 132
│       │   │           │   └── @value <- compute u16be bytes := 132
│       │   │           └── data <- slice (length.@value - 2) jpeg.dqt-data :=
│       │   │               ├── precision-table-id <- base.u8 := 0
│       │   │               └── elements <- repeat base.u8 :=
│       │   │                   ├── 0 <- base.u8 := 2
│       │   │                   ├── 1 <- base.u8 := 2
│       │   │                   ├── 2 <- base.u8 := 2
│       │   │                   ├── 3 <- base.u8 := 2
│       │   │                   ├── 4 <- base.u8 := 2
│       │   │                   ├── 5 <- base.u8 := 2
│       │   │                   ├── 6 <- base.u8 := 2
│       │   │                   ├── 7 <- base.u8 := 2
│       │   │                   ├── 8 <- base.u8 := 2
│       │   │                   ├── 9 <- base.u8 := 2
│       │   │                   ~
│       │   │                   └── 128 <- base.u8 := 12
│       │   ├── header <- jpeg.frame-header :=
│       │   │   └── sof0 <- jpeg.sof0 :=
│       │   │       ├── marker <- { ... } :=
│       │   │       │   ├── ff <- [= 255] := 255
│       │   │       │   └── marker <- [= 192] := 192
│       │   │       ├── length <- base.u16be :=
│       │   │       │   ├── bytes <- (...) :=
│       │   │       │   │   ├── 0 <- base.u8 := 0
│       │   │       │   │   └── 1 <- base.u8 := 17
│       │   │       │   └── @value <- compute u16be bytes := 17
│       │   │       └── data <- slice (length.@value - 2) jpeg.sof-data :=
│       │   │           ├── sample-precision <- base.u8 := 8
│       │   │           ├── num-lines <- base.u16be :=
│       │   │           │   ├── bytes <- (...) :=
│       │   │           │   │   ├── 0 <- base.u8 := 2
│       │   │           │   │   └── 1 <- base.u8 := 197
│       │   │           │   └── @value <- compute u16be bytes := 709
│       │   │           ├── num-samples-per-line <- base.u16be :=
│       │   │           │   ├── bytes <- (...) :=
│       │   │           │   │   ├── 0 <- base.u8 := 2
│       │   │           │   │   └── 1 <- base.u8 := 197
│       │   │           │   └── @value <- compute u16be bytes := 709
│       │   │           ├── num-image-components <- base.u8 := 3
│       │   │           └── image-components <- repeat-count num-image-components jpeg.sof-image-component :=
│       │   │               ├── 0 <- jpeg.sof-image-component :=
│       │   │               │   ├── id <- base.u8 := 1
│       │   │               │   ├── sampling-factor <- base.u8 := 17
│       │   │               │   └── quantization-table-id <- base.u8 := 0
│       │   │               ├── 1 <- jpeg.sof-image-component :=
│       │   │               │   ├── id <- base.u8 := 2
│       │   │               │   ├── sampling-factor <- base.u8 := 17
│       │   │               │   └── quantization-table-id <- base.u8 := 1
│       │   │               └── 2 <- jpeg.sof-image-component :=
│       │   │                   ├── id <- base.u8 := 3
│       │   │                   ├── sampling-factor <- base.u8 := 17
│       │   │                   └── quantization-table-id <- base.u8 := 1
│       │   ├── scan <- jpeg.scan :=
│       │   │   ├── segments <- repeat jpeg.table-or-misc :=
│       │   │   │   ├── 0 <- jpeg.table-or-misc :=
│       │   │   │   │   └── dri <- jpeg.dri :=
│       │   │   │   │       ├── marker <- { ... } :=
│       │   │   │   │       │   ├── ff <- [= 255] := 255
│       │   │   │   │       │   └── marker <- [= 221] := 221
│       │   │   │   │       ├── length <- base.u16be :=
│       │   │   │   │       │   ├── bytes <- (...) :=
│       │   │   │   │       │   │   ├── 0 <- base.u8 := 0
│       │   │   │   │       │   │   └── 1 <- base.u8 := 4
│       │   │   │   │       │   └── @value <- compute u16be bytes := 4
│       │   │   │   │       └── data <- slice (length.@value - 2) jpeg.dri-data :=
│       │   │   │   │           └── restart-interval <- base.u16be :=
│       │   │   │   │               ├── bytes <- (...) :=
│       │   │   │   │               │   ├── 0 <- base.u8 := 0
│       │   │   │   │               │   └── 1 <- base.u8 := 89
│       │   │   │   │               └── @value <- compute u16be bytes := 89
│       │   │   │   └── 1 <- jpeg.table-or-misc :=
│       │   │   │       └── dht <- jpeg.dht :=
│       │   │   │           ├── marker <- { ... } :=
│       │   │   │           │   ├── ff <- [= 255] := 255
│       │   │   │           │   └── marker <- [= 196] := 196
│       │   │   │           ├── length <- base.u16be :=
│       │   │   │           │   ├── bytes <- (...) :=
│       │   │   │           │   │   ├── 0 <- base.u8 := 1
│       │   │   │           │   │   └── 1 <- base.u8 := 162
│       │   │   │           │   └── @value <- compute u16be bytes := 418
│       │   │   │           └── data <- slice (length.@value - 2) jpeg.dht-data :=
│       │   │   │               ├── class-table-id <- base.u8 := 0
│       │   │   │               ├── num-codes <- repeat-count 16 base.u8 :=
│       │   │   │               │   ├── 0 <- base.u8 := 0
│       │   │   │               │   ├── 1 <- base.u8 := 0
│       │   │   │               │   ├── 2 <- base.u8 := 7
│       │   │   │               │   ├── 3 <- base.u8 := 1
│       │   │   │               │   ├── 4 <- base.u8 := 1
│       │   │   │               │   ├── 5 <- base.u8 := 1
│       │   │   │               │   ├── 6 <- base.u8 := 1
│       │   │   │               │   ├── 7 <- base.u8 := 1
│       │   │   │               │   ├── 8 <- base.u8 := 0
│       │   │   │               │   ├── 9 <- base.u8 := 0
│       │   │   │               │   ~
│       │   │   │               │   └── 15 <- base.u8 := 0
│       │   │   │               └── values <- repeat base.u8 :=
│       │   │   │                   ├── 0 <- base.u8 := 4
│       │   │   │                   ├── 1 <- base.u8 := 5
│       │   │   │                   ├── 2 <- base.u8 := 3
│       │   │   │                   ├── 3 <- base.u8 := 2
│       │   │   │                   ├── 4 <- base.u8 := 6
│       │   │   │                   ├── 5 <- base.u8 := 1
│       │   │   │                   ├── 6 <- base.u8 := 0
│       │   │   │                   ├── 7 <- base.u8 := 7
│       │   │   │                   ├── 8 <- base.u8 := 8
│       │   │   │                   ├── 9 <- base.u8 := 9
│       │   │   │                   ~
│       │   │   │                   └── 398 <- base.u8 := 250
│       │   │   ├── sos <- jpeg.sos :=
│       │   │   │   ├── marker <- { ... } :=
│       │   │   │   │   ├── ff <- [= 255] := 255
│       │   │   │   │   └── marker <- [= 218] := 218
│       │   │   │   ├── length <- base.u16be :=
│       │   │   │   │   ├── bytes <- (...) :=
│       │   │   │   │   │   ├── 0 <- base.u8 := 0
│       │   │   │   │   │   └── 1 <- base.u8 := 12
│       │   │   │   │   └── @value <- compute u16be bytes := 12
│       │   │   │   └── data <- slice (length.@value - 2) jpeg.sos-data :=
│       │   │   │       ├── num-image-components <- base.u8 := 3
│       │   │   │       ├── image-components <- repeat-count num-image-components jpeg.sos-image-component :=
│       │   │   │       │   ├── 0 <- jpeg.sos-image-component :=
│       │   │   │       │   │   ├── component-selector <- base.u8 := 1
│       │   │   │       │   │   └── entropy-coding-table-ids <- base.u8 := 0
│       │   │   │       │   ├── 1 <- jpeg.sos-image-component :=
│       │   │   │       │   │   ├── component-selector <- base.u8 := 2
│       │   │   │       │   │   └── entropy-coding-table-ids <- base.u8 := 17
│       │   │   │       │   └── 2 <- jpeg.sos-image-component :=
│       │   │   │       │       ├── component-selector <- base.u8 := 3
│       │   │   │       │       └── entropy-coding-table-ids <- base.u8 := 17
│       │   │   │       ├── start-spectral-selection <- base.u8 := 0
│       │   │   │       ├── end-spectral-selection <- base.u8 := 63
│       │   │   │       └── approximation-bit-position <- base.u8 := 0
│       │   │   └── data <- jpeg.scan-data :=
│       │   │       ├── scan-data <- repeat (_ |...| _) :=
│       │   │       │   ├── 0 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 248 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 248
│       │   │       │   ├── 1 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 204 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 204
│       │   │       │   ├── 2 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 64 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 64
│       │   │       │   ├── 3 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 237 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 237
│       │   │       │   ├── 4 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 185 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 185
│       │   │       │   ├── 5 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 29 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 29
│       │   │       │   ├── 6 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 72 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 72
│       │   │       │   ├── 7 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 223 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 223
│       │   │       │   ├── 8 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 62 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 62
│       │   │       │   ├── 9 <- _ |...| _ :=
│       │   │       │   │   └── mcu <- jpeg.mcu :=
│       │   │       │   │       ├── mcu <- _ |...| _ := { byte := 221 }
│       │   │       │   │       └── @value <- compute match mcu { ... } := 221
│       │   │       │   ~
│       │   │       │   └── 80492 <- _ |...| _ :=
│       │   │       │       └── mcu <- jpeg.mcu :=
│       │   │       │           ├── mcu <- _ |...| _ := { byte := 95 }
│       │   │       │           └── @value <- compute match mcu { ... } := 95
│       │   │       └── scan-data-stream <- compute flat-map (match scan-data { ... }) scan-data :=
│       │   │           ├── 0 := 248
│       │   │           ├── 1 := 204
│       │   │           ├── 2 := 64
│       │   │           ├── 3 := 237
│       │   │           ├── 4 := 185
│       │   │           ├── 5 := 29
│       │   │           ├── 6 := 72
│       │   │           ├── 7 := 223
│       │   │           ├── 8 := 62
│       │   │           ├── 9 := 221
│       │   │           ~
│       │   │           └── 80404 := 95
│       │   ├── dnl <- _ |...| _ := { none := () }
│       │   └── scans <- repeat jpeg.scan := []
│       └── eoi <- jpeg.eoi :=
│           ├── ff <- [= 255] := 255
│           └── marker <- [= 217] := 217
└── end <- end-of-input := ()
